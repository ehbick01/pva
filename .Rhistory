sales <- subset(sales, grepl(S, sales))
View(sales)
sales <- subset(sales, grepl('\\$', sales))
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, td:nth-child(3), a')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- unique(subset(sales, grepl('\\$', sales)))
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, td, nth-child(3), a')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- unique(subset(sales, grepl('\\$', sales)))
sales <- html_nodes(url, 'tbody, tr.alt, td, nth-child(3), a')
sales <- html_nodes(url, 'tbody, tr.alt, td.nth-child(3), a')
sales <- html_nodes(url, 'tbody, tr.alt, td:nth-child(3), a')
sales <- html_nodes(url, 'tbody, tr.alt, td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- unique(subset(sales, grepl('\\$', sales)))
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- unique(subset(sales, grepl('\\$', sales)))
View(sales)
?substr
substr(sales[1,1], 1, 1)
substr(sales[1], 1, 1)
sales[1]
sales[1,1]
as.character(sales[1,1])
as.character(sales[2,1])
substr(sales[1], 1, 1)
sales$dollas <- ifelse(substr(sales[,1], 1, 1) == "\\$", "YES", "NO")
View(sales)
substr(sales[2,1],1,1)
substr(sales[2,1],1,1) == "$"
sales$dollas <- ifelse(substr(sales[,1], 1, 1) == "$", "YES", "NO")
substr(sales[2,1],1,1) == "$"
View(sales)
sales <- subset(sales, dollars == "YES")
sales <- subset(sales, dollas == "YES")
View(sales)
sales <- sales[,-2]
View(sales)
sales <- as.data.frame(sales[,-2])
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- unique(subset(sales, grepl('\\$', sales)))
sales$dollas <- ifelse(substr(sales[,1], 1, 1) == "$", "YES", "NO")
sales <- subset(sales, dollas == "YES")
sales <- as.data.frame(sales[,-2])
View(sales)
length(sales[1,1])
nchar(sales[1,1])
nchar(as.character(sales[1,1]))
sales <- substr(sales, 1, (nchar(as.character(sales))-10))
View(sales)
sales <- as.data.frame(substr(sales, 1, (nchar(as.character(sales))-10)))
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- unique(subset(sales, grepl('\\$', sales)))
sales$dollas <- ifelse(substr(sales[,1], 1, 1) == "$", "YES", "NO")
sales <- subset(sales, dollas == "YES")
sales <- as.data.frame(sales[,-2])
sales <- as.data.frame(substr(sales[,1], 1, (nchar(as.character(sales))-10)))
View(sales)
substr(sales[1,1], 1, 8)
substr(sales[1,1], 1, nchar(as.character(sales[1,1]))-10)
substr(sales[,1], 1, nchar(as.character(sales[,1]))-10)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- unique(subset(sales, grepl('\\$', sales)))
sales$dollas <- ifelse(substr(sales[,1], 1, 1) == "$", "YES", "NO")
sales <- subset(sales, dollas == "YES")
sales <- as.data.frame(sales[,-2])
sales <- as.data.frame(substr(sales[,1], 1, (nchar(as.character(sales[,1]))-10)))
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- unique(subset(sales, grepl('\\$', sales)))
sales$dollas <- ifelse(substr(sales[,1], 1, 1) == "$", "YES", "NO")
sales <- subset(sales, dollas == "YES")
sales <- as.data.frame(sales[,-2])
salesPrice <- as.data.frame(substr(sales[,1], 1, (nchar(as.character(sales[,1]))-10)))
dates <- as.data.frame(substr(sales[,1], nchar(as.character(sales[,1]))-10, nchar(as.character(sales[,1]))))
View(dates)
dates <- as.data.frame(substr(sales[,1], nchar(as.character(sales[,1]))-11, nchar(as.character(sales[,1]))))
View(dates)
dates <- as.data.frame(substr(sales[,1], nchar(as.character(sales[,1]))-9, nchar(as.character(sales[,1]))))
View(dates)
salesFinal <- cbind(dates, salesPrice)
View(salesFinal)
# Pull sales price & date
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- unique(subset(sales, grepl('\\$', sales)))
sales$dollas <- ifelse(substr(sales[,1], 1, 1) == "$", "YES", "NO")
View(sales)
grepl("\\$",sales[1,1])
?gregexpr
gregexpr("\\$",sales[1,1])
substr(sales[1,1], gregexpr("\\$", sales[1,1]), nchar(sales[1,1]))
substr(sales[1,1], gregexpr("\\$", sales[1,1]), nchar(as.character(sales[1,1])))
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- substr(sales[1,], gregexpr("\\$", sales[1,]), nchar(as.character(sales[1,])))
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
View(sales)
gregexpr(" ", sales[1,1])
gregexpr(" ", sales[1,1])[1]
substr(sales[1,1], 1, grepexpr(" ", sales[1,1]))
substr(sales[1,1], 1, gregexpr(" ", sales[1,1]))
sales[1,1]
substr(sales[1,1], 1, gregexpr("\n", sales[1,1]))
as.data.frame(substr(sales[1,1], 1, gregexpr("\n", sales[1,1])))
substr(as.character(sales[1,1]), 1, gregexpr("\n", as.character(sales[1,1])))
substr(as.character(sales[1,1]), 1, gregexpr(" ", as.character(sales[1,1])))
substr(sales[1,1], 1, gregexpr("\n", sales[1,1])[[1]])
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
View(sales)
sales <- as.data.frame(substr(sales[,1], 1, gregexpr(" ", sales[,1])[[1]]))
View(sales)
gregexpr(" ", sales[1,1])[[1]]
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
View(sales)
gregexpr(" ", sales[1,1])[[1]]
gregexpr(" ", sales[1,1])[1]
gregexpr(" ", sales[1,1])[[1]]
gregexpr("/n", sales[1,1])[[1]]
gregexpr("\n", sales[1,1])[[1]]
length(gregexpr(" ", sales[1,1])[[1]])
gregexpr(" ", sales[1,1])[[1]]
gregexpr("[ ]+", sales[1,1])[[1]]
strsplit(sales[1,1], " ")[[1]]
strsplit(as.character(sales[1,1]), " ")[[1]]
strsplit(as.character(sales[1,1]), "\n")[[1]]
gregexpr("\n", sales[1,1])[[1]]
gregexpr("\n", as.character(sales[1,1]))[[1]]
strsplit(as.character(sales[1,1]), "\n")[[1]]
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(strsplit(as.character(sales[1,1]), "\n")[[1]])
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(strsplit(as.character(sales[,1]), "\n")[[1]])
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(strsplit(as.character(sales[,1]), "\n")
)
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
nchar(sales[1,1])- nchar(gsub(" ", "", sales[1,1]))
nchar(as.character(sales[1,1]))- nchar(gsub(" ", "", as.character(sales[1,1])))
nchar(gsub(" ", "", as.character(sales[1,1])))
nchar(as.character(sales[1,1]))
gregexpr(" ", sales[1,1])[[1]]
gregexpr(" ", sales[1,1])[1]
gregexpr(" ", sales[1,1])[[2]]
gregexpr(" ", sales[1,1])[[[1]]
gregexpr(" ", sales[1,1])[[[1]]]
gregexpr("\n", sales[1,1])[[1]]
gregexpr("\n", as.character(sales[1,1]))[[1]]
as.character(gregexpr("\n", as.character(sales[1,1]))[[1]])
as.character(gregexpr("\n", as.character(sales[1,1]))[[1]])[1]
sales <- as.data.frame(substr(sales[,1], 1, as.character(gregexpr("\n", as.character(sales[,1]))[[1]])[1]))
View(sales)
# Pull sales price & date
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(sales[,1], 1, as.character(gregexpr("\n", as.character(sales[,1]))[[1]])[1]))
View(sales)
sales <- unique(sales)
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
View(sales)
as.character(gregexpr("\n", as.character(sales[1,1]))[[1]])[1]
as.character(gregexpr("\n", as.character(sales[3,1]))[[1]])[1]
as.character(gregexpr(" ", as.character(sales[1,1]))[[1]])[1]
as.character(gregexpr("\n", as.character(sales[3,1]))[[1]])[1]
as.character(gregexpr("\n", as.character(sales[2,1]))[[1]])[1]
if (as.character(gregexpr("\n", as.character(sales[,1]))[[1]])[1] < 0) {
sales <- as.data.frame(substr(sales[,1], 1, nchar(as.character(sales[,1]))))
} else {
sales <- as.data.frame(substr(sales[,1], 1, as.character(gregexpr("\n", as.character(sales[,1]))[[1]])[1]))
}
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
if (as.character(gregexpr("\n", as.character(sales[,1]))[[1]])[1] < 0) {
sales <- as.data.frame(substr(sales[,1], 1, nchar(as.character(sales[,1]))))
} else {
sales <- as.data.frame(substr(sales[,1], 1, as.character(gregexpr("\n", as.character(sales[,1]))[[1]])[1]))
}
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
as.character(gregexpr('\n', as.character(3,1))[[1]])[1]
as.character(gregexpr('\n', as.character(3,1))[[1]])[1] < 0
as.data.frame(substr(sales[3,1], 1, nchar(as.character(sales[3,1]))))
as.character(as.data.frame(substr(sales[3,1], 1, nchar(as.character(sales[3,1])))))
as.data.frame(substr(sales[3,1], 1, nchar(as.character(sales[3,1]))))
for (i in 1:nrow(sales)) {
if (as.character(gregexpr("\n", as.character(sales[i,1]))[[1]])[1] < 0) {
sales <- as.data.frame(substr(sales[i,1], 1, nchar(as.character(sales[i,1]))))
} else {
sales <- as.data.frame(substr(sales[i,1], 1, as.character(gregexpr("\n", as.character(sales[i,1]))[[1]])[1]))
}
}
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
View(sales)
class(sales[,1])
sales <- as.character(sales[,1])
View(sales)
class(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
class(sales)
sales <- as.data.frame(substr(sales[,1], 1, gregexpr(" ", as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
View(sales)
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr("\n", as.character(sales[,1]))[[1]]))
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales[1,1]
sales[3,1]
sales[1,1]
gregexpr("\n", as.character(sales[,1]))[[1]]
gregexpr("\n", as.character(sales[,1]))[[1]] > 0
gregexpr("\n", as.character(sales[,1]))[[1]] < 0
sales <- if (gregexpr("\n", as.character(sales[,1]))[[1]] > 0) {
as.data.frame(substr(as.character(sales[,1]), 1, gregexpr("\n", as.character(sales[,1]))[[1]]))
} else {
as.data.frame(substr(as.character(sales[,1]), 1, nchar(as.character(sales[,1]))))
}
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales <- if (gregexpr("\n", as.character(sales[,1]))[[1]] > 0) {
as.data.frame(substr(as.character(sales[,1]), 1, gregexpr("\n", as.character(sales[,1]))[[1]]))
} else {
as.data.frame(substr(as.character(sales[,1]), 1, nchar(as.character(sales[,1]))))
}
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- if (gregexpr("\n", as.character(sales[,1]))[[1]] > 0) {
as.data.frame(substr(as.character(sales[,1]), 1, gregexpr("\n", as.character(sales[,1]))[[1]]))
} else {
as.data.frame(substr(as.character(sales[,1]), 1, nchar(as.character(sales[,1]))))
}
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales <- if (gregexpr("\n", as.character(sales[,1]))[[1]] > 0) {
as.data.frame(substr(as.character(sales[,1]), 1, gregexpr("\n", as.character(sales[,1]))[[1]]))
} else {
as.data.frame(substr(as.character(sales[,1]), 1, nchar(as.character(sales[,1]))))
}
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
View(sales)
nchar(as.character(sales[3,1]))
sales$Space <- grepexpr('\n', as.character(sales[,1]))
sales$Space <- gregexpr('\n', as.character(sales[,1]))
View(sales)
sales$Revised <- ifelse(sales$Space > 1, substr(sales[,1], 1, sales$Space), sales[,1])
View(sales)
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, sales[,2]), sales[,1])
View(sales)
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, sales[,2]), 0)
View(sales)
sales$Final <- ifelse(sales[,3] == 0, sales[,1], sales[,2])
View(sales)
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, as.character(sales[,2])), 0)
View(sales)
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, as.character(sales[,2])), as.character(sales[,1]))
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales$Space <- gregexpr('\n', as.character(sales[,1]))
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, as.character(sales[,2])), as.character(sales[,1]))
View(sales)
sales <- sales[,3]
View(sales)
sales <- as.data.frame(sales[,3])
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales$Space <- gregexpr('\n', as.character(sales[,1]))
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, as.character(sales[,2])), as.character(sales[,1]))
sales <- as.data.frame(sales[,3])
View(sales)
sales <- unique(sales)
View(sales)
sales[1,1] == sales[2,1]
sales[1,1]
sales[2,1]
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales$Space <- gregexpr('\n', as.character(sales[,1]))
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, as.character(sales[,2])-1), as.character(sales[,1]))
sales <- as.data.frame(sales[,3])
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales$Space <- gregexpr('\n', as.character(sales[,1]))
as.character(sales[1,2])
as.character(as.numeric(sales[1,2]))
as.numeric(as.character(sales[1,2]))
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales$Space <- gregexpr('\n', as.character(sales[,1]))
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, as.numeric(as.character(sales[,2]))-1), as.character(sales[,1]))
sales <- as.data.frame(sales[,3])
View(sales)
sales <- unique(sales)
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales$Space <- gregexpr('\n', as.character(sales[,1]))
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, as.numeric(as.character(sales[,2]))-1), as.character(sales[,1]))
sales <- as.data.frame(sales[,3])
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
View(sales)
sales <- unique(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales$Space <- gregexpr('\n', as.character(sales[,1]))
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, as.numeric(as.character(sales[,2]))-1), as.character(sales[,1]))
sales <- as.data.frame(sales[,3])
View(sales)
sales <- unique(sales)
View(sales)
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- unique(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
View(sales)
# Pull sales price & date
sales <- html_nodes(url, 'tbody, tr.alt, td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
View(sales)
sales <- unique(sales)
View(sales)
# Pull sales price & date
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales$Space <- gregexpr('\n', as.character(sales[,1]))
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, as.numeric(as.character(sales[,2]))-1), as.character(sales[,1]))
sales <- as.data.frame(sales[,3])
sales <- unique(sales)
salesPrice <- as.data.frame(substr(sales[,1], 1, (nchar(as.character(sales[,1]))-10)))
dates <- as.data.frame(substr(sales[,1], nchar(as.character(sales[,1]))-9, nchar(as.character(sales[,1]))))
View(salesPrice)
View(dates)
# Combine sales price and data
salesFinal <- cbind(dates, salesPrice)
View(salesFinal)
paste("https://jeffersonpva.ky.gov/property-search/property-listings/?psfldLow=0&psfldHigh=5000000&psfldFrom=01/01/2010&psfldTo=06/11/2015&psfldNeighborhood=&psfldPtype=&searchType=RangeSearch&psfldStories=&psfldBathrooms=&psfldResSqFeetLow=&psfldResSqFeetHigh=&psfldResYearLow=&psfldResYearHigh=&psfldWall=&psfldStreet=&psfldParcel=&psfldComOwner=&psfldComSqFeetLow=&psfldComSqFeetHigh=&psfldComYearLow=&psfldComYearHigh=&psfldLandLow=&psfldLandHigh=&psfldPropClass=&psfldPropUse=&propertySearchFormButton=Search&searchPage", "=", 1, "#results", sep = "")
for (i in 1:568) {
# Define URL
url <- "https://jeffersonpva.ky.gov/property-search/property-listings/?psfldLow=0&psfldHigh=5000000&psfldFrom=01%2F01%2F2010&psfldTo=06%2F11%2F2015&psfldNeighborhood=&psfldPtype=&searchType=RangeSearch&psfldStories=&psfldBathrooms=&psfldResSqFeetLow=&psfldResSqFeetHigh=&psfldResYearLow=&psfldResYearHigh=&psfldWall=&psfldStreet=&psfldParcel=&psfldComOwner=&psfldComSqFeetLow=&psfldComSqFeetHigh=&psfldComYearLow=&psfldComYearHigh=&psfldLandLow=&psfldLandHigh=&psfldPropClass=&psfldPropUse=&propertySearchFormButton=Search#results"
url <- html(url)
# Pull property hyperlinks only
links <- html_nodes(url, 'a')
links <- html_attr(links, 'href')
links <- as.data.frame(links)
links <- unique(subset(links, grepl('property-details', links)))
# Add to complete dataset
addylinks <- rbind(addylinks, links)
# Pull sales price & date
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales$Space <- gregexpr('\n', as.character(sales[,1]))
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, as.numeric(as.character(sales[,2]))-1), as.character(sales[,1]))
sales <- as.data.frame(sales[,3])
# Need to build a key to avoid eliminating sales that happen on the same day at the same price
sales <- unique(sales)
# Separate price and date -- still need to be able to account for same price on same date sales
salesPrice <- as.data.frame(substr(sales[,1], 1, (nchar(as.character(sales[,1]))-10)))
dates <- as.data.frame(substr(sales[,1], nchar(as.character(sales[,1]))-9, nchar(as.character(sales[,1]))))
# Combine sales price and data
salesFinal <- cbind(dates, salesPrice)
# Add to complete dataset
salesdata <- rbind(salesdata, salesFinal)
}
addylinks <- data.frame()
salesdata <- data.frame()
View(salesdata)
# Iterate through the 568 pages
for (i in 1:3) {
# Define URL
url <- "https://jeffersonpva.ky.gov/property-search/property-listings/?psfldLow=0&psfldHigh=5000000&psfldFrom=01%2F01%2F2010&psfldTo=06%2F11%2F2015&psfldNeighborhood=&psfldPtype=&searchType=RangeSearch&psfldStories=&psfldBathrooms=&psfldResSqFeetLow=&psfldResSqFeetHigh=&psfldResYearLow=&psfldResYearHigh=&psfldWall=&psfldStreet=&psfldParcel=&psfldComOwner=&psfldComSqFeetLow=&psfldComSqFeetHigh=&psfldComYearLow=&psfldComYearHigh=&psfldLandLow=&psfldLandHigh=&psfldPropClass=&psfldPropUse=&propertySearchFormButton=Search#results"
url <- html(url)
# Pull property hyperlinks only
links <- html_nodes(url, 'a')
links <- html_attr(links, 'href')
links <- as.data.frame(links)
links <- unique(subset(links, grepl('property-details', links)))
# Add to complete dataset
addylinks <- rbind(addylinks, links)
# Pull sales price & date
sales <- html_nodes(url, 'tbody, tr.alt, #td:nth-child(2), td:nth-child(3)')
sales <- html_text(sales)
sales <- as.data.frame(sales)
sales <- as.data.frame(substr(sales[,1], gregexpr("\\$", sales[,1]), nchar(as.character(sales[,1]))))
sales <- as.data.frame(substr(as.character(sales[,1]), 1, gregexpr(" ", as.character(sales[,1]))[[1]]))
sales$Space <- gregexpr('\n', as.character(sales[,1]))
sales$Revised <- ifelse(sales[,2] > 1, substr(sales[,1], 1, as.numeric(as.character(sales[,2]))-1), as.character(sales[,1]))
sales <- as.data.frame(sales[,3])
# Need to build a key to avoid eliminating sales that happen on the same day at the same price
sales <- unique(sales)
# Separate price and date -- still need to be able to account for same price on same date sales
salesPrice <- as.data.frame(substr(sales[,1], 1, (nchar(as.character(sales[,1]))-10)))
dates <- as.data.frame(substr(sales[,1], nchar(as.character(sales[,1]))-9, nchar(as.character(sales[,1]))))
# Combine sales price and data
salesFinal <- cbind(dates, salesPrice)
# Add to complete dataset
salesdata <- rbind(salesdata, salesFinal)
}
View(addylinks)
View(salesdata)
plot(salesdata)
plot(x = salesdata[,1], y = salesdata[,2])
plot(x = salesdata[,1], y = salesdata[,2], type = 'h')
?plot
